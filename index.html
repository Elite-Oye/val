<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A Question For You ğŸ’•</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;500;600;700&family=Sacramento&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="val.css">
</head>
<body>
    <!-- Floating Hearts Background -->
    <div class="hearts-bg" id="heartsBg"></div>

    <div class="container">
        <!-- Question Page -->
        <div class="question-page" id="questionPage">
            <div class="heart-icon">ğŸ’</div>
            <h1 class="question">Will you be my Valentine?</h1>
            <p class="subtitle">Choose wisely... ğŸ˜‰</p>
            
            <div class="buttons-container" id="buttonsContainer">
                <button class="btn btn-yes" id="yesBtn" onclick="sayYes()">
                    <span>Yes</span> ğŸ’•
                </button>
                <button class="btn btn-no" id="noBtn">
                    <span>No</span> ğŸ’”
                </button>
            </div>
        </div>

        <!-- Congratulations Page -->
        <div class="congrats-page" id="congratsPage">
            <div class="congrats-hearts">ğŸ’–ğŸ’•ğŸ’–</div>
            <h1 class="congrats-title">Yay!</h1>
            <p class="congrats-message">
                I knew you'd say yes! ğŸ¥°<br><br>
                You just made me the happiest person ever. 
                Can't wait to spend this special day with you! ğŸ’•
            </p>
            <div class="congrats-emoji">ğŸ¥³ğŸ’ğŸ‰</div>
        </div>
    </div>

    <script>
        const noBtn = document.getElementById('noBtn');
        const yesBtn = document.getElementById('yesBtn');
        const questionPage = document.getElementById('questionPage');
        const congratsPage = document.getElementById('congratsPage');
        const heartsBg = document.getElementById('heartsBg');

        // Track if button has started escaping
        let isEscaping = false;
        let currentX = 0;
        let currentY = 0;

        // Create floating hearts background
        function createFloatingHearts() {
            const hearts = ['ğŸ’•', 'ğŸ’–', 'ğŸ’—', 'ğŸ’“', 'â™¥ï¸', 'ğŸ’˜'];
            for (let i = 0; i < 15; i++) {
                const heart = document.createElement('div');
                heart.className = 'floating-heart';
                heart.textContent = hearts[Math.floor(Math.random() * hearts.length)];
                heart.style.left = Math.random() * 100 + '%';
                heart.style.animationDelay = Math.random() * 15 + 's';
                heart.style.animationDuration = (15 + Math.random() * 10) + 's';
                heartsBg.appendChild(heart);
            }
        }
        createFloatingHearts();

        // Calculate escape position based on mouse direction
        function escapeFromMouse(mouseX, mouseY) {
            const btnRect = noBtn.getBoundingClientRect();
            const btnCenterX = btnRect.left + btnRect.width / 2;
            const btnCenterY = btnRect.top + btnRect.height / 2;

            // Calculate direction FROM mouse TO button (escape direction)
            const dirX = btnCenterX - mouseX;
            const dirY = btnCenterY - mouseY;

            // Normalize the direction
            const length = Math.sqrt(dirX * dirX + dirY * dirY);
            const normalX = dirX / length;
            const normalY = dirY / length;

            // Escape distance
            const escapeDistance = 200;

            // Calculate new position
            let newX = btnCenterX + (normalX * escapeDistance) - btnRect.width / 2;
            let newY = btnCenterY + (normalY * escapeDistance) - btnRect.height / 2;

            // Keep within screen bounds with padding
            const padding = 20;
            const maxX = window.innerWidth - btnRect.width - padding;
            const maxY = window.innerHeight - btnRect.height - padding;

            // If going out of bounds, find a random safe spot away from mouse
            if (newX < padding || newX > maxX || newY < padding || newY > maxY) {
                let attempts = 0;
                do {
                    newX = padding + Math.random() * (maxX - padding);
                    newY = padding + Math.random() * (maxY - padding);
                    
                    // Make sure it's far from mouse
                    const distFromMouse = Math.sqrt(
                        Math.pow(newX + btnRect.width/2 - mouseX, 2) + 
                        Math.pow(newY + btnRect.height/2 - mouseY, 2)
                    );
                    
                    if (distFromMouse > 150) break;
                    attempts++;
                } while (attempts < 20);
            }

            // Clamp to bounds
            newX = Math.max(padding, Math.min(newX, maxX));
            newY = Math.max(padding, Math.min(newY, maxY));

            return { x: newX, y: newY };
        }

        // Move button smoothly to new position
        function moveNoButton(x, y) {
            if (!isEscaping) {
                // First escape - get current position and switch to fixed
                const rect = noBtn.getBoundingClientRect();
                currentX = rect.left;
                currentY = rect.top;
                noBtn.classList.add('escaping');
                noBtn.style.left = currentX + 'px';
                noBtn.style.top = currentY + 'px';
                isEscaping = true;
            }

            // Update position (CSS transition handles smooth movement)
            currentX = x;
            currentY = y;
            noBtn.style.left = x + 'px';
            noBtn.style.top = y + 'px';
        }

        // ALWAYS track mouse movement (works on all devices with mouse/trackpad)
        document.addEventListener('mousemove', (e) => {
            const btnRect = noBtn.getBoundingClientRect();
            const btnCenterX = btnRect.left + btnRect.width / 2;
            const btnCenterY = btnRect.top + btnRect.height / 2;

            // Calculate distance from mouse to button center
            const distance = Math.sqrt(
                Math.pow(e.clientX - btnCenterX, 2) + 
                Math.pow(e.clientY - btnCenterY, 2)
            );

            // Trigger escape when mouse is within 100px
            if (distance < 100) {
                const newPos = escapeFromMouse(e.clientX, e.clientY);
                moveNoButton(newPos.x, newPos.y);
            }
        });

        // ALSO handle touch/tap for mobile devices
        noBtn.addEventListener('click', (e) => {
            e.preventDefault();
            const newPos = escapeFromMouse(e.clientX, e.clientY);
            moveNoButton(newPos.x, newPos.y);
        });

        noBtn.addEventListener('touchstart', (e) => {
            e.preventDefault();
            const touch = e.touches[0];
            const newPos = escapeFromMouse(touch.clientX, touch.clientY);
            moveNoButton(newPos.x, newPos.y);
        });

        // When Yes is clicked
        function sayYes() {
            questionPage.style.display = 'none';
            congratsPage.style.display = 'flex';
            createConfetti();
        }

        // Create confetti celebration
        function createConfetti() {
            const colors = ['#e8b4b8', '#d4a5a5', '#f8e1e4', '#a8a8b3', '#fff'];
            const confettiCount = 100;

            for (let i = 0; i < confettiCount; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.left = Math.random() * 100 + '%';
                    confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                    confetti.style.borderRadius = Math.random() > 0.5 ? '50%' : '0';
                    confetti.style.transform = `rotate(${Math.random() * 360}deg)`;
                    confetti.style.animationDuration = (2 + Math.random() * 2) + 's';
                    document.body.appendChild(confetti);

                    // Remove confetti after animation
                    setTimeout(() => confetti.remove(), 4000);
                }, i * 30);
            }
        }
    </script>
</body>
</html>
